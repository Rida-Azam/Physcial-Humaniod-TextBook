"use strict";(self.webpackChunkphysical_ai_textbook=self.webpackChunkphysical_ai_textbook||[]).push([[726],{8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var a=i(6540);const s={},t=a.createContext(s);function r(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(t.Provider,{value:n},e.children)}},9693:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var a=i(4848),s=i(8453);const t={id:"chapter4",sidebar_position:4},r="Building Real ROS 2 Packages in Python (rclpy)",o={id:"module1/chapter4",title:"Building Real ROS 2 Packages in Python (rclpy)",description:"Overview",source:"@site/docs/module1/chapter4.mdx",sourceDirName:"module1",slug:"/module1/chapter4",permalink:"/docs/module1/chapter4",draft:!1,unlisted:!1,editUrl:"https://github.com/your-github-username/physical-ai-textbook/tree/main/docs/module1/chapter4.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"chapter4",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"ROS 2 Architecture Deep Dive",permalink:"/docs/module1/chapter3"},next:{title:"URDF & Robot Description Mastery",permalink:"/docs/module1/chapter5"}},l={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Package Structure",id:"package-structure",level:2},{value:"Creating Your First ROS 2 Package",id:"creating-your-first-ros-2-package",level:2},{value:"Package Manifest (package.xml)",id:"package-manifest-packagexml",level:3},{value:"Setup Configuration (setup.py)",id:"setup-configuration-setuppy",level:3},{value:"Practical Example: Robot Command Publisher",id:"practical-example-robot-command-publisher",level:2},{value:"Advanced Topics",id:"advanced-topics",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Project",id:"project",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"building-real-ros-2-packages-in-python-rclpy",children:"Building Real ROS 2 Packages in Python (rclpy)"}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(n.p,{children:"This chapter covers the fundamentals of building real ROS 2 packages using Python and the rclpy client library. You'll learn how to create professional-grade ROS 2 packages that follow best practices and can be integrated into larger robotic systems."}),"\n",(0,a.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,a.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Create ROS 2 packages with proper structure and dependencies"}),"\n",(0,a.jsx)(n.li,{children:"Implement ROS 2 nodes using rclpy"}),"\n",(0,a.jsx)(n.li,{children:"Design custom messages and services"}),"\n",(0,a.jsx)(n.li,{children:"Package and distribute your ROS 2 code"}),"\n",(0,a.jsx)(n.li,{children:"Debug and test ROS 2 packages effectively"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,a.jsx)(n.p,{children:"A well-structured ROS 2 package follows a specific directory layout that enables proper build processes and dependency management. The basic structure includes:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"package.xml"}),": Package manifest with metadata and dependencies"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"setup.py"}),": Python setup configuration"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"setup.cfg"}),": Installation configuration"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"src/"}),": Source code directory"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"test/"}),": Unit and integration tests"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"launch/"}),": Launch files for running nodes"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"config/"}),": Configuration files"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"creating-your-first-ros-2-package",children:"Creating Your First ROS 2 Package"}),"\n",(0,a.jsx)(n.p,{children:"Let's create a practical ROS 2 package that demonstrates the core concepts of node development, topic communication, and service calls."}),"\n",(0,a.jsx)(n.h3,{id:"package-manifest-packagexml",children:"Package Manifest (package.xml)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\n<package format="3">\n  <name>robot_control_examples</name>\n  <version>0.0.0</version>\n  <description>Examples for ROS 2 robot control</description>\n  <maintainer email="user@example.com">Your Name</maintainer>\n  <license>Apache-2.0</license>\n\n  <depend>rclpy</depend>\n  <depend>std_msgs</depend>\n  <depend>geometry_msgs</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,a.jsx)(n.h3,{id:"setup-configuration-setuppy",children:"Setup Configuration (setup.py)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\nfrom glob import glob\nimport os\n\npackage_name = 'robot_control_examples'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='user@example.com',\n    description='Examples for ROS 2 robot control',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'simple_publisher = robot_control_examples.simple_publisher:main',\n            'simple_subscriber = robot_control_examples.simple_subscriber:main',\n        ],\n    },\n)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"practical-example-robot-command-publisher",children:"Practical Example: Robot Command Publisher"}),"\n",(0,a.jsx)(n.p,{children:"Let's build a practical example that publishes robot commands to control a simulated humanoid robot:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# robot_control_examples/robot_command_publisher.py\nimport rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\nfrom std_msgs.msg import String\nimport time\n\nclass RobotCommandPublisher(Node):\n    def __init__(self):\n        super().__init__('robot_command_publisher')\n        self.publisher = self.create_publisher(Twist, 'cmd_vel', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = Twist()\n        msg.linear.x = float(self.i % 10) / 10.0  # Vary linear velocity\n        msg.angular.z = float(self.i % 8) / 10.0  # Vary angular velocity\n        self.publisher.publish(msg)\n        self.get_logger().info(f'Publishing: linear={msg.linear.x}, angular={msg.angular.z}')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    robot_command_publisher = RobotCommandPublisher()\n    rclpy.spin(robot_command_publisher)\n    robot_command_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,a.jsx)(n.h2,{id:"advanced-topics",children:"Advanced Topics"}),"\n",(0,a.jsx)(n.p,{children:"This chapter will also cover advanced topics such as:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Custom message definitions and usage"}),"\n",(0,a.jsx)(n.li,{children:"Action servers and clients for complex behaviors"}),"\n",(0,a.jsx)(n.li,{children:"Parameter management and dynamic reconfiguration"}),"\n",(0,a.jsx)(n.li,{children:"Lifecycle nodes for robust system management"}),"\n",(0,a.jsx)(n.li,{children:"Integration with ROS 2 tools like rqt and rviz"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Create a ROS 2 package that publishes sensor data from a simulated humanoid robot"}),"\n",(0,a.jsx)(n.li,{children:"Implement a service that allows remote control of robot joints"}),"\n",(0,a.jsx)(n.li,{children:"Design a custom message type for humanoid robot pose commands"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"project",children:"Project"}),"\n",(0,a.jsx)(n.p,{children:"Develop a complete ROS 2 package that implements a simple humanoid robot controller with both publisher and subscriber nodes, following all ROS 2 best practices and including proper testing and documentation."})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);